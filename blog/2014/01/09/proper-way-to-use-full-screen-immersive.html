<!DOCTYPE html>
<html>

	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="theme-color" content="#2a7ae2">

	<title>Proper way to use full-screen immersive mode on Android KitKat (4.4) and up</title>
	<meta name="description" content="This is Jeric Bryle Dy's Personal Site. Here, you can browse his games, check his publications or just bug him by sending him a message.
">

	
		<link rel="manifest" href="/webapp/default-manifest.json">
	
	<link rel="shortcut icon" href="/images/icons/jd/favicon128.png" type="image/png">
	<link rel="icon" href="/images/icons/jd/favicon128.png" type="image/png">
	

	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css" />

	<link rel="stylesheet" href="/css/material.min.css" />
	<script src="/js/material.min.js"></script>
	<link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons" />

	<link rel="stylesheet" href="/css/magnific-popup.css">
	<link rel="stylesheet" href="/css/main.css">
	
	<script type="text/javascript" src="/js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="/js/jquery.magnific-popup.min.js"></script>
	<script type="text/javascript" src="/js/main.js"></script>
	
	<!-- social plugins -->
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<script id="facebook-jssdk" type="text/javascript" defer src="//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1476944352583507&version=v2.0"></script>
	<script id="twitter-wjs" type="text/javascript" defer src="//platform.twitter.com/widgets.js"></script>
	<!-- g+ comment -->
	<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

	<link rel="canonical" href="http://www.jericdy.com/blog/2014/01/09/proper-way-to-use-full-screen-immersive.html">
</head>


	<body>

		<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

			
<header class="mdl-layout__header">
	<div class="mdl-layout__header-row">
		<!-- Title -->
		<span class="mdl-layout-title">
			<a class="site-title-link" href="/">
				<div class="site-title">Jeric Bryle Dy</div>
				<div class="site-moto">Life is a Game</div>
			</a>
		</span>
		<!-- Add spacer, to align navigation to the right -->
		<div class="mdl-layout-spacer"></div>
		<!-- Navigation. We hide it in small screens. -->
		<nav class="top-navigation mdl-navigation mdl-layout--large-screen-only">
			<a class="mdl-navigation__link" href="/blog/">Blog</a>
			<a class="mdl-navigation__link" href="/games/">Games</a>
			<a class="mdl-navigation__link" href="/publications/">Publications</a>
			<a class="mdl-navigation__link" href="/about/">About</a>
		</nav>
	</div>
</header>
<div class="mdl-layout__drawer">
	<span class="left-navigation mdl-layout-title">Jeric Bryle Dy</span>
	<nav class="mdl-navigation">
		<a class="mdl-navigation__link" href="/blog/">Blog</a>
		<a class="mdl-navigation__link" href="/games/">Games</a>
		<a class="mdl-navigation__link" href="/publications/">Publications</a>
		<a class="mdl-navigation__link" href="/about/">About</a>
	</nav>
</div>


			<main class="mdl-layout__content">
				<div class="page-content">

					<div class="wrapper">

						<div itemscope itemtype="http://schema.org/Blog" class="post">

	<meta itemprop="image" content="http://www.jericdy.com/images/blog/sonic-dash-navbar.png" />
	<meta itemprop="thumbnailUrl" content="http://www.jericdy.com/images/blog/sonic-dash-navbar.png" />
	<header class="post-header">
		<h1 itemprop="name" class="post-title">Proper way to use full-screen immersive mode on Android KitKat (4.4) and up</h1>
		<p class="post-meta">
			<meta itemprop="datePublished" content="2014-01-09T12:16:00+00:00" />
			<span id="post-timestamp">January 9, 2014</span>
			â€¢
			<span itemscope itemprop="author" itemtype="http://schema.org/Person">
				<span itemprop="givenName">Jeric Bryle</span>
				<span itemprop="familyName">Dy</span>
			</span>
			
		</p>
	</header>

	<article class="post-content">
		<p class="note">
	Update (June 11, 2014):
	Google has fixed this problem since Android 4.4.3. Adjusting the volume won't break the <code>SYSTEM_UI_FLAG_IMMERSIVE_STICKY</code> mode anymore. I would still recommend doing the work around since not everyone have updated to 4.4.3.
</p>

<p>
	So I finally decided to blog about this.
	I discovered this possible common mistake the same day I got my Android KitKat update on my Nexus 7 (2013).
	I just wanted to make sure that it IS a common mistake until I post such thing,
		because it could also be an Android bug as well.
	Well today, I can confirm that it is in fact a bug.
</p>

<p>
	I've been playing around with one of the new features in Android KitKat,
		the <a href="http://developer.android.com/about/versions/kitkat.html#44-immersive">full-screen immersive mode</a>.
	So according to the <a href="http://developer.android.com/about/versions/android-4.4.html#UI">documentation</a>,
		to enter the new full-screen immersive mode we must call:
</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">	<span class="n">setSystemUiVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span> <span class="o">|</span> <span class="n">View</span><span class="o">.</span><span class="na">SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><span class="o">);</span></code></pre></figure>

<p>
	after calling that, you'll get:
</p>



	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/sonic-dash-ok.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/sonic-dash-ok.png" />
</a>

	<div class="item-caption">Sonic Dash</div>



	</div>





	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/kitkat-daydream-ok.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/kitkat-daydream-ok.png" />
</a>

	<div class="item-caption">KitKat easter egg / day dream</div>



	</div>



<p>
	now that we're in immersive mode, to bring up the navigation bar (back, home, recent apps buttons) we swipe up from the bottom of the screen.
	Swipe down from the top of the screen when we want the status bar.
</p>



	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/sonic-dash-navbar.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/sonic-dash-navbar.png" />
</a>



	</div>





	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/kitkat-daydream-navbar.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/kitkat-daydream-navbar.png" />
</a>



	</div>



<p>
	since the flag's name is <code>SYSTEM_UI_FLAG_IMMERSIVE_STICKY</code> you know, "sticky" it should return to immersive mode after some time.
	Of course it does that.
</p>

<p>
	So here's the problem, when you press the volume keys, you'll get a volume slider panel popped up.
	Unfortunately, the navigation bar also comes up.
</p>



	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/sonic-dash-volume.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/sonic-dash-volume.png" />
</a>



	</div>





	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/kitkat-daydream-volume.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/kitkat-daydream-volume.png" />
</a>



	</div>



<p>
	You would think that it would return to full-screen immersive mode after some time since it's "sticky" but it won't.
</p>



	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/sonic-dash-stuck.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/sonic-dash-stuck.png" />
</a>



	</div>





	<div class="item-spacer">


<a class="image-zoom" href="/images/blog/kitkat-daydream-stuck.png">
	<img class="img-responsive image-center" src="/images/blog/thumbnails/800x600/kitkat-daydream-stuck.png" />
</a>



	</div>



<p>
	Now this COULD be just a bug in Android. It might get fixed soon, but in the mean time here's a simple way to fix the problem.
</p>

<p>
	After setting the system UI visibility above, we create a change listener.
</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">final</span> <span class="n">Runnable</span> <span class="n">hideSystemUiCallback</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">setSystemUiVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span> <span class="o">|</span> <span class="n">View</span><span class="o">.</span><span class="na">SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">};</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">setOnSystemUiVisibilityChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnSystemUiVisibilityChangeListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onSystemUiVisibilityChange</span><span class="o">(</span><span class="kt">int</span> <span class="n">visibility</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">visibility</span> <span class="o">&amp;</span> <span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span> <span class="o">|</span> <span class="n">View</span><span class="o">.</span><span class="na">SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><span class="o">))</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">hideSystemUiHandler</span><span class="o">.</span><span class="na">removeCallbacks</span><span class="o">(</span><span class="n">hideSystemUiCallback</span><span class="o">);</span>
            <span class="n">hideSystemUiHandler</span><span class="o">.</span><span class="na">postDelayed</span><span class="o">(</span><span class="n">hideSystemUiCallback</span><span class="o">,</span> <span class="n">HIDE_SYSTEM_UI_DELAY_MILLI</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">});</span></code></pre></figure>

<p>
	It's similar to handling the low profile state before KitKat actually (<a href="https://android.googlesource.com/platform/tools/base/+/master/templates/activities/FullscreenActivity/root/src/app_package/FullscreenActivity.java.ftl">link</a>).
	Anyway, hope you find this tip helpful!
</p>

	</article>
	<div class="g-comments"
		
			data-href="http://www.jericdy.com/blog/2014/01/09/proper-way-to-use-full-screen-immersive.html"
		
		data-width="642"
		data-first_party_property="BLOGGER"
		data-view_type="FILTERED_POSTMOD">
	</div>

</div>


					</div>

				</div>

				
<footer class="mdl-mini-footer">
	<div class="mdl-mini-footer--left-section" style="width: 50%;">
		<div class="mdl-logo">Follow</div>
		
			<a class="follow-link" href="https://www.linkedin.com/in/jericdy" title="LinkedIn">
				<div class="follow-entry">
					<img src="/images/icons/social/linkedin.svg" width="16" height="16" />
				</div>
			</a>
		
			<a class="follow-link" href="https://www.youtube.com/user/jericbryledy" title="YouTube">
				<div class="follow-entry">
					<img src="/images/icons/social/youtube.svg" width="16" height="16" />
				</div>
			</a>
		
			<a class="follow-link" href="http://blog.jericdy.com" title="Blogger">
				<div class="follow-entry">
					<img src="/images/icons/social/blogger.svg" width="16" height="16" />
				</div>
			</a>
		
			<a class="follow-link" href="https://twitter.com/jericbryledy" title="Twitter">
				<div class="follow-entry">
					<img src="/images/icons/social/twitter.svg" width="16" height="16" />
				</div>
			</a>
		
			<a class="follow-link" href="https://plus.google.com/+JericBryleDy" title="Google+">
				<div class="follow-entry">
					<img src="/images/icons/social/gplus.svg" width="16" height="16" />
				</div>
			</a>
		
			<a class="follow-link" href="https://www.facebook.com/jericdy" title="Facebook">
				<div class="follow-entry">
					<img src="/images/icons/social/facebook.svg" width="16" height="16" />
				</div>
			</a>
		
			<a class="follow-link" href="https://github.com/jericbryledy" title="GitHub">
				<div class="follow-entry">
					<img src="/images/icons/social/github.svg" width="16" height="16" />
				</div>
			</a>
		
	</div>
	<div class="mdl-mini-footer__right-section" style="width: 50%;">
		<div class="mdl-logo">Share</div>
		<div>
			<div class="social-entry">
				<div class="gplus">
					<div class="g-plusone" data-href="http://www.jericdy.com/blog/2014/01/09/proper-way-to-use-full-screen-immersive.html" data-size="medium"></div>
				</div>
			</div>
			<div class="social-entry">
				<div class="facebook">
					<div id="fb-root"></div>
					<div class="fb-like" data-href="http://www.jericdy.com/blog/2014/01/09/proper-way-to-use-full-screen-immersive.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>
				</div>
			</div>
			<div class="social-entry">
				<div class="twitter">
					<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.jericdy.com/blog/2014/01/09/proper-way-to-use-full-screen-immersive.html" data-hashtags="jericdy">Tweet</a>
				</div>
			</div>
		</div>
	</div>
</footer>


			</main>

		</div>

	</body>

</html>
